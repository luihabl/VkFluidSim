#version 450
#extension GL_EXT_buffer_reference : require
#extension GL_EXT_scalar_block_layout : require
#extension GL_GOOGLE_include_directive : require

#include "common.glsl"

layout (local_size_x = GROUP_SIZE, local_size_y = 1, local_size_z = 1) in;
void main() {
    uint threadGlobal = gl_GlobalInvocationID.x;
    uint group = gl_WorkGroupID.x;

    uint globalA = threadGlobal * 2 + 0;
	uint globalB = threadGlobal * 2 + 1;

	if (globalA < pc.item_count) pc.elements.data[globalA] += pc.group_sums.data[group];
	if (globalB < pc.item_count) pc.elements.data[globalB] += pc.group_sums.data[group];
}